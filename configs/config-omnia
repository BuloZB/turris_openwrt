CONFIG_ATH_USER_REGD=y
CONFIG_VERSION_FILENAMES=n
CONFIG_TARGET_mvebu=y
CONFIG_TARGET_mvebu_Turris-Omnia=y
# CONFIG_TARGET_BOARD="mvebu"
# CONFIG_TARGET_ARCH_PACKAGES="mvebu"
CONFIG_TARGET_ROOTFS_EXT4FS=y
CONFIG_TARGET_ROOTFS_BTRFS=y
CONFIG_TARGET_ROOTFS_SQUASHFS=n
# CONFIG_TARGET_ROOTFS_TARGZ=y
CONFIG_TARGET_ROOTFS_PARTSIZE=64
CONFIG_TARGET_ROOTFS_INCLUDE_KERNEL=y
CONFIG_TARGET_ROOTFS_INCLUDE_DTB=y
CONFIG_TARGET_ROOTFS_INCLUDE_ZIMAGE=y
CONFIG_TARGET_ROOTFS_INCLUDE_UIMAGE=n
CONFIG_TARGET_ROOTFS_INCLUDE_FIT=n
CONFIG_DEVEL=y
CONFIG_TARGET_OPTIONS=y
CONFIG_TARGET_OPTIMIZATION="-O2 -pipe -march=armv7-a -mtune=cortex-a9 -mfpu=vfpv3-d16"
CONFIG_SOFT_FLOAT=n
CONFIG_IMAGEOPT=y
CONFIG_VERSIONOPT=y
CONFIG_VERSION_REPO="https://api.turris.cz/openwrt-repo/omnia/packages"
CONFIG_VERSION_NICK="omnia"
CONFIG_BUSYBOX_CUSTOM=y
CONFIG_BUSYBOX_CONFIG_CROND=n
CONFIG_BUSYBOX_CONFIG_CRONTAB=n
CONFIG_BUSYBOX_CONFIG_SYSLOGD=n
CONFIG_BUSYBOX_CONFIG_STTY=y

# Disable package signing for now (we don't preserve signing key)
CONFIG_SIGNED_PACKAGES=n

# Use musl for Omnia
CONFIG_TOOLCHAINOPTS=y
CONFIG_LIBC_USE_MUSL=y
CONFIG_USE_MUSL=y
CONFIG_MUSL_VERSION="1.1.11"

# LXC related stuff
CONFIG_KERNEL_NAMESPACES=y
CONFIG_KERNEL_UTS_NS=y
CONFIG_KERNEL_IPC_NS=y
CONFIG_KERNEL_PID_NS=y
CONFIG_KERNEL_USER_NS=y
CONFIG_KERNEL_NET_NS=y
CONFIG_KERNEL_LXC_MISC=y
CONFIG_KERNEL_CGROUPS=y
CONFIG_KERNEL_CGROUP_DEVICE=y
CONFIG_KERNEL_CGROUP_SCHED=y
CONFIG_KERNEL_CGROUP_CPUACCT=y
CONFIG_KERNEL_CGROUP_FREEZER=y
CONFIG_KERNEL_CPUSETS=y
CONFIG_KERNEL_RESOURCE_COUNTERS=y
CONFIG_KERNEL_MEMCG=y
CONFIG_KERNEL_MEMCG_SWAP=y
#CONFIG_DISPLAY_SUPPORT=y

# Make sure we use real strip, that one leaves the debug link in
CONFIG_USE_STRIP=y

# Built-in packages
CONFIG_PACKAGE_kmod-fs-ext4=y
CONFIG_PACKAGE_oneshot=y

# Modular packages compiled every time
CONFIG_PACKAGE_ca-certificates=m
CONFIG_PACKAGE_kmod-fs-vfat=m
CONFIG_PACKAGE_kmod-ebtables=m
CONFIG_PACKAGE_kmod-ebtables-ipv4=m
CONFIG_PACKAGE_kmod-ebtables-ipv6=m
CONFIG_PACKAGE_kmod-ebtables-watchers=m
CONFIG_PACKAGE_kmod-ipt-compat-xtables=m
CONFIG_PACKAGE_kmod-ipt-conntrack-extra=m
CONFIG_PACKAGE_kmod-ipt-ipmark=m
CONFIG_PACKAGE_kmod-ipt-tproxy=m
CONFIG_PACKAGE_kmod-bridge=m
CONFIG_PACKAGE_kmod-llc=m
CONFIG_PACKAGE_kmod-stp=m
CONFIG_PACKAGE_kmod-tun=m
CONFIG_PACKAGE_kmod-usb-storage-extras=m
CONFIG_PACKAGE_conntrack-tools=m
CONFIG_PACKAGE_ebtables=m
CONFIG_PACKAGE_iptables-mod-tproxy=m
CONFIG_PACKAGE_ip6tables-mod-nat=m
CONFIG_PACKAGE_openssh-client-utils=m
CONFIG_PACKAGE_openssh-client=m
CONFIG_PACKAGE_openssh-sftp-server=m
CONFIG_PACKAGE_openssh-sftp-client=m
CONFIG_PACKAGE_bash=m
CONFIG_PACKAGE_vim-full=m
CONFIG_PACKAGE_psmisc=m
CONFIG_PACKAGE_htop=m
# CONFIG_PACKAGE_mtd-utils-nandtest=m
# CONFIG_PACKAGE_mtd-utils-nanddump=m
